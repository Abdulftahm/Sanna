{% extends 'library/base.html' %}
{% load static %}

{% block title %}مكتبتي - منصة القصص العربية{% endblock %}

{% block content %}
<section class="stories-section">
    <h2 class="section-title">مكتبتي</h2>

    <div class="stories-grid">
        {% for item in user_library_books %}
        <a href="{% url 'description' item.book.id %}">
            <div class="story-card">
                <img src="{{ item.book.cover_image.url }}" alt="{{ item.book.title }}" class="story-image">
                <h3 class="story-title">{{ item.book.title }}</h3>
                <p class="story-author">{{ item.book.author }}</p>
                <div class="story-meta">
                    <span>مدة الاستماع: --:--:--</span>
                    <span>تاريخ الإضافة: {{ item.added_at|date:"Y-m-d" }}</span>
                </div>
                <p class="story-category">{{ item.book.category.name }}</p>
                <div class="story-actions">
                    <a href="{% url 'listen' item.book.id %}" class="action-btn listen-btn">استمع</a>
                    <div class="feature-icon">
                        {% if item.is_favorite %}
                        <img src="{% static 'img/icons8_heart_2 1.svg' %}" alt="مفضل">
                        {% else %}
                        <img src="{% static 'img/icons8_heart_2 1.svg' %}" alt="ليس مفضل" style="opacity: 0.5;">
                        {% endif %}
                    </div>
                    <a href="{% url 'description' item.book.id %}" class="action-btn read-btn">اقرأ</a>
                </div>
            </div>
        </a>
        {% empty %}
        <div class="empty-library">
            <p>لا توجد كتب في مكتبتك حتى الآن.</p>
            <a href="{% url 'Storycate' %}" class="explore-btn">استكشف القصص</a>
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
    .empty-library {
        text-align: center;
        padding: 60px 20px;
        color: var(--text-color);
    }

    .empty-library p {
        font-size: 1.2rem;
        margin-bottom: 20px;
    }
</style>
{% endblock %}
