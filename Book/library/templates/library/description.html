{% extends 'library/base.html' %}
{% load static %}

{% block title %}{{ book.title }} - {{ book.author }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/book-detail.css' %}">
{% endblock %}

{% block content %}
<div class="book-detail-container">
    <div class="book-container">
        <div class="book-cover">
            <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" class="cover-image">
        </div>

        <div class="book-content">
            <div class="book-header">
                <h1>{{ book.title }}</h1>
                <p class="author">{{ book.author }}</p>
                <div class="rating">
                    <span class="star filled">&#9733;</span>
                    <span class="star filled">&#9733;</span>
                    <span class="star filled">&#9733;</span>
                    <span class="star filled">&#9733;</span>
                    <span class="star">&#9733;</span>
                </div>
            </div>

            <div class="book-meta-grid">
                <div class="meta-item">
                    <span class="meta-label">مدة الاستماع:</span>
                    <span class="meta-value">01:15:00</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">التصنيف:</span>
                    <span class="meta-value">{{ book.category.name }}</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">عدد الصفحات:</span>
                    <span class="meta-value">83</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">تاريخ النشر:</span>
                    <span class="meta-value">{{ book.created_at|date:"Y-m-d" }}</span>
                </div>
            </div>

            <div class="book-actions">
                <a href="{% url 'listen' book.id %}" class="action-btn listen-btn">استمع</a>
                {% if user.is_authenticated %}
                <a href="{% url 'toggle_favorite' book.id 'description' %}" class="favorite-btn" title="{% if is_favorite %}إزالة من المفضلة{% else %}أضف للمفضلة{% endif %}">
                    {% if is_favorite %}
                    <img src="{% static 'img/icons8_heart_filled.svg' %}" alt="إزالة من المفضلة">
                    {% else %}
                    <img src="{% static 'img/icons8_heart_2 1.svg' %}" alt="أضف للمفضلة">
                    {% endif %}
                </a>
                {% else %}
                <a href="{% url 'index' %}" class="favorite-btn" title="سجل دخول للإضافة للمفضلة">
                    <img src="{% static 'img/icons8_heart_2 1.svg' %}" alt="أضف للمفضلة">
                </a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="book-description">
        <h2>وصف الكتاب</h2>
        <p>{{ book.description }}</p>
    </div>

    <div class="support-section">
        <h2>أحببت هذا العمل؟ ادعم الكاتب بمبلغ بسيط ليساعده على تقديم المزيد</h2>
        <button class="action-btn listen-btn">ادعمه الآن</button>
    </div>
</div>
{% endblock %}
