{% load static %}

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حصار عبق - ماهر دعبول</title>
    <style>
        :root {
            --primary-color: #3B82F6;
            --dark-color: #111827;
            --secondary-dark: #1F2937;
            --text-color: #F3F4F6;
            --light-blue: #60A5FA;
            --border-color: #374151;
        }

        [data-theme="light"] {
            --primary-color: #2563EB;
            --dark-color: #F3F4F6;
            --secondary-dark: #E5E7EB;
            --text-color: #111827;
            --light-blue: #93C5FD;
            --border-color: #D1D5DB;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        .nav-actions {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}
.search-container {
    position: relative;
    display: flex;
    align-items: center;
}
.search-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
}

.search-input {
    width: 0;
    padding: 0;
    border: none;
    border-radius: 20px;
    background-color: var(--input-bg);
    color: var(--text-color);
    transition: all 0.3s ease;
    position: absolute;
    top: 60px;
    opacity: 0;
}

.search-input.active {
    width: 200px;
    padding: 0.5rem 1rem;
    opacity: 1;
}

.auth-btn {
    background: var(--btn-gradient);
    color: white;
    padding: 0.5rem 1.5rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
/* أضف هذه الأنماط إلى قسم style */

.header-container {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.burger-menu {
    display: none;
    flex-direction: column;
    justify-content: space-around;
    width: 30px;
    height: 25px;
    cursor: pointer;
    z-index: 1001;
}

.burger-menu span {
    display: block;
    height: 3px;
    width: 100%;
    background-color: var(--text-color);
    transition: all 0.3s ease;
}

/* أنماط للشاشات الصغيرة */
@media (max-width: 992px) {
    header {
        padding: 15px 20px;
    }
    
    .burger-menu {
        display: flex;
    }
    
    .nav-links {
        position: fixed;
        top: 0;
        right: -100%;
        width: 70%;
        max-width: 300px;
        height: 100vh;
        background-color: var(--secondary-dark);
        flex-direction: column;
        justify-content: flex-start;
        padding-top: 80px;
        gap: 25px;
        transition: right 0.3s ease-in-out;
        z-index: 1000;
    }
    
    .nav-links.active {
        right: 0;
    }
    
    .auth-buttons {
        margin-right: auto;
        margin-left: 20px;
    }
    
    .book-container {
        margin: 30px auto;
        border-radius: 15px;
    }
    
    .book-cover {
        height: 350px;
    }
    
    .book-title {
        font-size: 28px;
    }
    
    .action-buttons {
        gap: 20px;
    }
    
    .audio-player {
        margin: 50px auto;
        padding: 20px;
    }
    
    .player-header {
        flex-direction: column-reverse;
        gap: 20px;
        text-align: center;
    }
    
    .player-cover {
        margin: 0 auto;
    }
    
    .player-main-controls {
        gap: 20px;
    }
    
    .play-btn {
        width: 50px;
        height: 50px;
    }
}

@media (max-width: 576px) {
    .book-cover {
        height: 250px;
    }
    
    .book-title {
        font-size: 24px;
    }
    
    .book-author {
        font-size: 16px;
    }
    
    .action-btn {
        padding: 12px 25px;
        font-size: 16px;
    }
    
    .description-title {
        font-size: 24px;
    }
    
    .description-text {
        font-size: 16px;
    }
    
    .player-title {
        font-size: 20px;
    }
    
    .player-author {
        font-size: 16px;
    }
    
    .player-year {
        font-size: 14px;
    }
    
    .action-buttons {
        flex-direction: column;
    }
}
/* أضف هذه الأنماط */
.burger-menu.active span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
}

.burger-menu.active span:nth-child(2) {
    opacity: 0;
}

.burger-menu.active span:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -6px);
}
.playlist-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 999;
    display: none;
}
        body {
            background-color: var(--dark-color);
            color: var(--text-color);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .gradient-bg {
            position: absolute;
            background: linear-gradient(264deg, #7000FF 0%, #06FFF0 100%);
            border-radius: 9999px;
            filter: blur(133.97px);
            z-index: -1;
        }

        .gradient-1 {
            width: 351.44px;
            height: 412.47px;
            left: 194.18px;
            top: 281px;
            transform: rotate(54deg);
        }

        .gradient-2 {
            width: 436.90px;
            height: 512.77px;
            right: -100px;
            bottom: 100px;
            transform: rotate(54deg);
        }

        header {
            padding: 20px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-links {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            font-size: 20px;
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .login-btn {
            background: linear-gradient(90deg, #2563EB 0%, #153885 100%);
            color: #F9FAFB;
            padding: 10px 30px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 18px;
        }

        .user-icon {
            width: 50px;
            height: 50px;
            background-color: white;
            border-radius: 50%;
        }

        .book-container {
            max-width: 1000px;
            margin: 50px auto;
            background-color: var(--secondary-dark);
            border-radius: 24px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .book-cover {
            width: 100%;
            height: 500px;
            background-color: var(--secondary-dark);
        }

        .book-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .book-info {
            padding: 30px;
        }

        .book-title {
            text-align: center;
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .book-author {
            text-align: center;
            font-size: 18px;
            margin-bottom: 20px;
        }

        .book-meta {
            display: flex;
            justify-content: center;
            gap: 100px;
            margin-bottom: 20px;
        }

        .book-category {
            text-align: center;
            margin-bottom: 30px;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 100px;
        }

        .action-btn {
            padding: 15px 40px;
            background-color: var(--primary-color);
            color: var(--dark-color);
            border-radius: 8px;
            text-decoration: none;
            font-size: 20px;
        }

        .listen-btn {
            background-color: var(--primary-color);
        }

        .read-btn {
            background-color: var(--light-blue);
            border: 1px solid var(--light-blue);
        }

        .book-description {
            max-width: 900px;
            margin: 50px auto;
            text-align: center;
        }

        .description-title {
            font-size: 30px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .description-text {
            font-size: 20px;
            line-height: 1.6;
        }

        .audio-player {
            max-width: 900px;
            margin: 100px auto;
            background-color: var(--secondary-dark);
            border-radius: 24px;
            border: 1px solid var(--border-color);
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .player-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        .player-author {
            font-size: 18px;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .player-year {
            font-size: 16px;
            color: var(--text-color);
            opacity: 0.6;
        }
        .player-cover {
            width: 120px;
            height: 120px;
            background-color: #282533;
            border-radius: 10px;
            overflow: hidden;
        }

        .player-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .player-controls {
            display: flex;
            justify-content: flex-start;
            gap: 20px;
            margin-top: 30px;
        }
        .player-main-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin-bottom: 30px;
        }
        .playlist-menu {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            max-width: 90%;
            background-color: var(--secondary-dark);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 15px;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .playlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .playlist-header h3 {
            font-size: 18px;
            margin: 0;
        }

        .close-playlist {
            font-size: 24px;
            cursor: pointer;
        }

        .playlist-items {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .playlist-items li {
            padding: 10px;
            cursor: pointer;
            border-radius: 6px;
            margin-bottom: 5px;
            transition: background-color 0.2s;
        }

        .playlist-items li:hover {
            background-color: var(--primary-color);
        }

        .playlist-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }
        .control-btn {
            width: 40px;
            height: 40px;
            background-color: transparent;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-color);
        }
        .control-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .control-btn svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        .play-btn {
            width: 60px;
            height: 60px;
            background-color: var(--primary-color);
            color: var(--dark-color);
        }

        .play-btn:hover {
            transform: scale(1.05);
        }

        .play-btn svg {
            width: 30px;
            height: 30px;
        }

        .progress-container {
            margin-top: 20px;
        }
        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .progress {
            width: 30%;
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 3px;
            position: relative;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            color: var(--text-color);
            font-size: 14px;
            opacity: 0.7;
        }
        .play-btn .pause-icon {
            display: none;
        }

        .play-btn.playing .play-icon {
            display: none;
        }

        .play-btn.playing .pause-icon {
            display: block;
        }
        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }

        .volume-bar {
            width: 100px;
            height: 5px;
            background-color: #13101D;
            border-radius: 14px;
        }

        footer {
            padding: 50px;
            text-align: center;
            border-top: 1px solid white;
            margin-top: 100px;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin-bottom: 30px;
        }

        .footer-links a {
            color: var(--text-color);
            text-decoration: none;
            font-size: 20px;
        }

        .comment-section {
            max-width: 1000px;
            margin: 50px auto;
        }

        .comment-input {
            width: 100%;
            height: 50px;
            background-color: transparent;
            border: 1px solid #A6BFF7;
            border-radius: 50px;
            padding: 0 20px;
            color: var(--text-color);
            font-size: 16px;
            text-align: right;
        }

        .comment-label {
            text-align: right;
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        /* From Uiverse.io by Galahad */
        /* switch settings 👇 */
        .ui-switch {
            /* switch */
            --switch-bg: rgb(135, 150, 165);
            --switch-width: 48px;
            --switch-height: 20px;
            /* circle */
            --circle-diameter: 32px;
            --circle-bg: rgb(0, 56, 146);
            --circle-inset: calc((var(--circle-diameter) - var(--switch-height)) / 2);
            margin-right: 15px;
        }

        .ui-switch input {
            display: none;
        }

        .slider {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: var(--switch-width);
            height: var(--switch-height);
            background: var(--switch-bg);
            border-radius: 999px;
            position: relative;
            cursor: pointer;
        }

        .slider .circle {
            top: calc(var(--circle-inset) * -1);
            left: 0;
            width: var(--circle-diameter);
            height: var(--circle-diameter);
            position: absolute;
            background: var(--circle-bg);
            border-radius: inherit;
            background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjAiIHdpZHRoPSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxwYXRoIGZpbGw9IiNmZmYiCiAgICAgICAgZD0iTTkuMzA1IDEuNjY3VjMuNzVoMS4zODlWMS42NjdoLTEuMzl6bS00LjcwNyAxLjk1bC0uOTgyLjk4Mkw1LjA5IDYuMDcybC45ODItLjk4Mi0xLjQ3My0xLjQ3M3ptMTAuODAyIDBMMTMuOTI3IDUuMDlsLjk4Mi45ODIgMS40NzMtMS40NzMtLjk4Mi0uOTgyek0xMCA1LjEzOWE0Ljg3MiA0Ljg3MiAwIDAwLTQuODYyIDQuODZBNC44NzIgNC44NzIgMCAwMDEwIDE0Ljg2MiA0Ljg3MiA0Ljg3MiAwIDAwMTQuODYgMTAgNC44NzIgNC44NzIgMCAwMDEwIDUuMTM5em0wIDEuMzg5QTMuNDYyIDMuNDYyIDAgMDExMy40NzEgMTBhMy40NjIgMy40NjIgMCAwMS0zLjQ3MyAzLjQ3MkEzLjQ2MiAzLjQ2MiAwIDAxNi41MjcgMTAgMy40NjIgMy40NjIgMCAwMTEwIDYuNTI4ek0xLjY2NSA5LjMwNXYxLjM5aDIuMDgzdi0xLjM5SDEuNjY2em0xNC41ODMgMHYxLjM5aDIuMDg0di0xLjM5aC0yLjA4NHpNNS4wOSAxMy45MjhMMy42MTYgMTUuNGwuOTgyLjk4MiAxLjQ3My0xLjQ3My0uOTgyLS45ODJ6bTkuODIwMGwtLjk4Mi45ODIgMS40NzMgMS40NzMuOTgyLS45ODItMS40NzMtMS40NzN6TTkuMzA1IDE2LjI1djIuMDgzaDEuMzg5VjE2LjI1aC0xLjM5eiIgLz4KPC9zdmc+");
            background-repeat: no-repeat;
            background-position: center center;
            -webkit-transition: left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
            -o-transition: left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
            transition: left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
            box-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12);
            ;
        }

        .slider .circle::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.75);
            border-radius: inherit;
            -webkit-transition: all 500ms;
            -o-transition: all 500ms;
            transition: all 500ms;
            opacity: 0;
        }

        /* actions */
        .ui-switch input:checked+.slider .circle {
            left: calc(100% - var(--circle-diameter));
            background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjAiIHdpZHRoPSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxwYXRoIGZpbGw9IiNmZmYiCiAgICAgICAgZD0iTTQuMiAyLjVsLS43IDEuOC0xLjguNyAxLjguNy43IDEuOC42LTEuOEw2LjcgNWwtMS45LS43LS42LTEuOHptMTUgOC4zYTYuNyA2LjcgMCAxMS02LjYtNi42IDUuOCA1LjggMCAwMDYuNiA2LjZ6IiAvPgo8L3N2Zz4=");
        }

        .ui-switch input:active+.slider .circle::before {
            -webkit-transition: 0s;
            -o-transition: 0s;
            transition: 0s;
            opacity: 1;
            width: 0;
            height: 0;
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 20px;
                padding: 20px;
            }

            .nav-links {
                gap: 20px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .book-meta {
                gap: 30px;
                flex-direction: column;
                align-items: center;
            }

            .action-buttons {
                gap: 20px;
                flex-direction: column;
                align-items: center;
            }

            .audio-player {
                border-radius: 30px;
                padding: 20px;
            }

            .player-header {
                flex-direction: column;
                gap: 20px;
            }

            .player-cover {
                width: 200px;
                height: 200px;
            }
    .nav-actions {
        gap: 1rem;
    }
            .footer-links {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
        <link rel="shortcut icon" href="{% static 'img/Group.svg' %}" type="image/x-icon">

</head>
<body>
    <div class="gradient-bg gradient-1"></div>
    <div class="gradient-bg gradient-2"></div>

    <header>
        <div class="header-container">
            <img class="logo" src="{% static 'img/Group.svg' %}" alt="شعار الموقع">
            
            <!-- زر البرجر للشاشات الصغيرة -->
            <div class="burger-menu" id="burgerMenu">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <div class="nav-links" id="navLinks">
            <a href="{% url 'main_page' %}">الرئيسية</a>
            <a href="{% url 'Storycate' %}">قصصي</a>
            <a href="{% url 'MyLibrary' %}">مكتبة</a>
            <a href="{% url 'my_account' %}">الحساب</a>
                <label class="ui-switch">
                    <input type="checkbox" id="themeToggle">
                    <div class="slider">
                        <div class="circle"></div>
                    </div>
                </label>
            </div>
                        <div class="nav-actions">
                <div class="search-container">
                    <button class="search-btn" id="searchBtn">
                                <img src="{% static 'img/icons8_Search 1.svg' %}"  style="width: 30px;" alt="بحث">
                    </button>
                    <input type="text" class="search-input" id="searchInput" placeholder="ابحث عن قصص...">
                </div>             
            </div>
            <div class="auth-buttons">
                <a href="#" class="login-btn">تسجيل الدخول</a>
            </div>
        </div>
    </header>

    <div class="book-container">
        <div class="book-cover">
            <img src="{{ book.cover_image.url }}" alt="{{ book.title }}">
        </div>
        <div class="book-info">
            <h1 class="book-title">{{ book.title }}</h1>
            <p class="book-author">{{ book.author }}</p>
            <div class="book-meta">
                <span>مدة الإستماع: 01:15:00</span>
                <span>عدد الصفحات: 83</span>
            </div>
            <p class="book-category">{{ book.category.name }}</p>
            <div class="action-buttons">
                <a href="{{ book.audio_file.url }}" class="action-btn listen-btn" download>استمع</a>
                <a href="#" class="action-btn read-btn">اقرأ</a>
            </div>
        </div>
    </div>

    <div class="book-description">
        <h2 class="description-title">حصار عبق: رحلة عبر الألم والأمل في رواية ماهر دعبول</h2>
        <p class="description-text">
            في عالم يمزقه الصراع وتغمره المآسي، تأتي رواية "حصار عبق" للكاتب ماهر دعبول لتجسد قصةً مؤلمة ومتعمقة في نفوس شخصيات تبحث عن الخلاص والهوية. تَنسُج الرواية حبكتها من خيوط القهر والأمل، لتأخذ القارئ في جولة مشحونة بالعواطف والتجارب الفريدة التي تعكس واقع حياة الكثيرين، حيث تظل الأعين قادرة على رؤية الجمال رغم الحواجز.
        </p>
    </div>

<div class="audio-player">
    <div class="player-header">
        <div>
            <h3 class="player-title">حصار عبق</h3>
            <p class="player-author">ماهر دعبول</p>
            <p class="player-year">2010</p>
        </div>
        <div class="player-cover">
            <img src="{{ book.cover_image.url }}" alt="{{ book.title }}">
        </div>
    </div>
    
    <div class="player-controls">
        <div class="control-btn" title="إعجاب">
            <svg class="heart-icon" viewBox="0 0 24 24">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
        </div>
        <div class="control-btn" title="قائمة التشغيل">
            <svg class="list-icon" viewBox="0 0 24 24">
                <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
            </svg>
        </div>
        <div class="control-btn" title="مشاركة">
            <svg class="share-icon" viewBox="0 0 24 24">
                <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
            </svg>
        </div>
        <div class="control-btn" title="تشغيل عشوائي">
            <svg class="random-icon" viewBox="0 0 24 24">
                <path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"/>
            </svg>
        </div>
    </div>
    
    <div class="player-main-controls">
        <div class="control-btn" title="السابق">
            <svg class="prev-icon" viewBox="0 0 24 24">
                <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
            </svg>
        </div>
        <div class="control-btn play-btn" title="تشغيل / إيقاف">
            <svg class="play-icon" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"/>
            </svg>
            <svg class="pause-icon" viewBox="0 0 24 24" style="display: none;">
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
            </svg>
        </div>
        <div class="control-btn" title="التالي">
            <svg class="next-icon" viewBox="0 0 24 24">
                <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
            </svg>
        </div>
        <div class="control-btn" title="إعادة التشغيل">
            <svg class="repeat-icon" viewBox="0 0 24 24">
                <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
            </svg>
        </div>
    </div>
    
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress"></div>
        </div>
        <div class="time-display">
            <span class="current-time">0:00</span>
            <span class="duration">4:16</span>
        </div>
    </div>
</div>
<div class="playlist-menu" style="display: none;">
    <div class="playlist-header">
        <h3>قائمة التشغيل</h3>
        <span class="close-playlist">&times;</span>
    </div>
    <ul class="playlist-items">
        <li data-audio="/audio/Fog1.mp3">الفصل الأول</li>
        <li data-audio="audio2.mp3">الفصل الثاني</li>
        <li data-audio="audio3.mp3">الفصل الثالث</li>
        <li data-audio="audio4.mp3">الفصل الرابع</li>
    </ul>
</div>
    <div class="action-buttons" style="justify-content: center; margin: 50px auto;">
        <a href="#" class="action-btn listen-btn" style="padding: 20px 60px; font-size: 24px;">استماع للكتاب</a>
        <a href="#" class="action-btn read-btn" style="padding: 20px 60px; font-size: 24px;">قراءة الكتاب</a>
    </div>

    <div class="comment-section">
        <input type="text" class="comment-input" placeholder="اكتب تعليقك ..">
    </div>
<audio id="audio-player" src="{{ book.audio_file.url }}" controls  style="visibility: hidden;"></audio>
    <footer>
        <div class="footer-links">
            <a href="#">تواصل معنا</a>
            <a href="#">سياسة الخصوصية</a>
            <a href="#">الدعم</a>
            <a href="#">عن المنصة</a>
        </div>
    </footer>

<script>
    // Theme switcher functionality
    const themeToggle = document.getElementById('themeToggle');
    const currentTheme = localStorage.getItem('theme') || 'dark';
    
    // Set initial theme
    if (currentTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
        themeToggle.checked = true;
    } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeToggle.checked = false;
    }
    
    themeToggle.addEventListener('change', () => {
        const newTheme = themeToggle.checked ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
    });

    // Audio player functionality
    const audio = document.getElementById('audio-player');
    const playBtn = document.querySelector('.play-btn');
    const progressBar = document.querySelector('.progress-bar');
    const progress = document.querySelector('.progress');
    const currentTimeDisplay = document.querySelector('.current-time');
    const durationDisplay = document.querySelector('.duration');
    let isPlaying = false;

    // التحكم في زر التشغيل/الإيقاف
    
playBtn.addEventListener('click', function() {
    if (isPlaying) {
        audio.pause();
        this.querySelector('.play-icon').style.display = 'block';
        this.querySelector('.pause-icon').style.display = 'none';
    } else {
        audio.play();
        this.querySelector('.play-icon').style.display = 'none';
        this.querySelector('.pause-icon').style.display = 'block';
    }
    isPlaying = !isPlaying;
});

    // تحديث شريط التقدم
    audio.addEventListener('timeupdate', function() {
        const currentTime = audio.currentTime;
        const duration = audio.duration;
        
        if (!isNaN(duration)) {
            const progressPercent = (currentTime / duration) * 100;
            progress.style.width = `${progressPercent}%`;
            
            // تحديث الوقت المعروض
            currentTimeDisplay.textContent = formatTime(currentTime);
            durationDisplay.textContent = formatTime(duration);
        }
    });

    // التحكم في شريط التقدم
    progressBar.addEventListener('click', function(e) {
        const percent = e.offsetX / this.offsetWidth;
        audio.currentTime = percent * audio.duration;
        progress.style.width = `${percent * 100}%`;
    });

    // عند انتهاء التشغيل
    audio.addEventListener('ended', function() {
        playBtn.classList.remove('playing');
        isPlaying = false;
    });

    // تنسيق الوقت
    function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
    }

    // Playlist functionality
    const listIcon = document.querySelector('.list-icon');
    const playlistMenu = document.querySelector('.playlist-menu');
    const closePlaylist = document.querySelector('.close-playlist');
    const playlistItems = document.querySelectorAll('.playlist-items li');
    
    // إنشاء عنصر overlay
    const overlay = document.createElement('div');
    overlay.className = 'playlist-overlay';
    document.body.appendChild(overlay);
    
    // عرض القائمة عند الضغط على أيقونة القائمة
    listIcon.addEventListener('click', function(e) {
        e.stopPropagation();
        playlistMenu.style.display = 'block';
        overlay.style.display = 'block';
    });
    
    // إخفاء القائمة عند الضغط على زر الإغلاق
    closePlaylist.addEventListener('click', function() {
        playlistMenu.style.display = 'none';
        overlay.style.display = 'none';
    });
    
    // إخفاء القائمة عند الضغط على overlay
    overlay.addEventListener('click', function() {
        playlistMenu.style.display = 'none';
        overlay.style.display = 'none';
    });
    
    // اختيار عنصر من القائمة
    playlistItems.forEach(item => {
        item.addEventListener('click', function() {
            const audioFile = this.getAttribute('data-audio');
            
            // تغيير مصدر الصوت
            audio.src = audioFile;
            
            // تشغيل الصوت الجديد
            audio.play();
            playBtn.classList.add('playing');
            isPlaying = true;
            
            // إخفاء القائمة بعد الاختيار
            playlistMenu.style.display = 'none';
            overlay.style.display = 'none';
            
            // تحديث عنوان المقطع الصوتي
            document.querySelector('.player-title').textContent = this.textContent;
        });
    });
document.addEventListener('DOMContentLoaded', function() {
    // برجر مينو للشاشات الصغيرة
    const burgerMenu = document.getElementById('burgerMenu');
    const navLinks = document.getElementById('navLinks');
    const overlay = document.querySelector('.playlist-overlay');
    
    burgerMenu.addEventListener('click', function() {
        this.classList.toggle('active');
        navLinks.classList.toggle('active');
        
        if (navLinks.classList.contains('active')) {
            overlay.style.display = 'block';
        } else {
            overlay.style.display = 'none';
        }
    });
    
    // إغلاق القائمة عند النقر على رابط
    const navItems = navLinks.querySelectorAll('a');
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            burgerMenu.classList.remove('active');
            navLinks.classList.remove('active');
            overlay.style.display = 'none';
        });
    });
    
    // إغلاق القائمة عند النقر خارجها
    overlay.addEventListener('click', function() {
        burgerMenu.classList.remove('active');
        navLinks.classList.remove('active');
        this.style.display = 'none';
    });
});
    // تبديل شريط البحث
    const searchBtn = document.getElementById('searchBtn');
    const searchInput = document.getElementById('searchInput');
    
    searchBtn.addEventListener('click', function() {
        searchInput.classList.toggle('active');
        if (searchInput.classList.contains('active')) {
            searchInput.focus();
        }
    });
    
    // إغلاق البحث عند النقر خارجها
    document.addEventListener('click', function(e) {
        if (!searchBtn.contains(e.target) && !searchInput.contains(e.target)) {
            searchInput.classList.remove('active');
        }
    });
</script>
</body>
</html>